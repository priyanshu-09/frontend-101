<!DOCTYPE HTML>
<hEAD>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta charset="utf-8">
    <style>
        body{
            background-color: beige;
        }
       @media all and (min-width: 720px) {
            .head{
                display: flex;
                justify-content: space-evenly; 
                width: 450px; 
                margin-bottom: 20px;
            }
            .game-name{
                height: 150px;
                width: 150px;
            }
            .game-name > h1 {
                font-size: 3em;
            }
            .score-board{
                height: 100px;
                width: 150px;
            }
            .box{
                height: 450px;
                width: 450px;
                font-size: 40px;
            }
            .box>div>div{
                height: 100px;
                width: 100px;
            }
            .number{
                height: 100px;
                width: 100px;
            }
            .game-name, .score-board {
                margin-top: 20px;
            }
        }
        @media all and (max-width: 719px){
            .head{
                display: flex;
                justify-content: space-evenly;
                align-items: center; 
                flex-direction: column;
                width:100vw; 
                margin-bottom: 20px;
                margin-top: -13vh;
            }
            .game-name{
                height: 30vw;
                width: 60vw;
            }
            .game-name > h1 {
                font-size: 2.5em;
            }
            .game-name, .score-board {
                margin-top: 10px;
            }
            .score-board{
                height: 10vh;
                width: 30vw;
            }
            .box{
                height: 48vh;
                width: 89vw;
                font-size: 1.5em;
            }
            .box>div>div{
                min-height: calc((48vh-50px));
                min-width: calc((89vw-50px));
            }
            .number{
                height: calc((48vh-50px)/4);
                width:calc((89vw-50px)/4);
            }
            .wrapper{
                width: 100vw;
                height: 100vh;
            }
        }
        .wrapper{
            display: flex;
            justify-content: center;
            align-items:center;
            flex-direction: column;
        }
        

        .game-name {
            background: #edc501;
            
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
        }

        .game-name > h1 {
            
            font-weight: bold;
            letter-spacing: 1px;
            border-radius: 5px;
        }

        .score-board {
            background: #bbada0;
            
            float: right;
            border-radius: 10px;  
            display: flex;
            flex-direction: column;
            justify-content: space-around;
        }
        .score-title {
            color: #cdc1b4;
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
        }
        #score {
            font-size: 2em;
            color: #fff;
            text-align: center;
        }
        .box{
            
            
            border-radius: 2%;
            padding: 5px;
            background-color:#e3ac78;

            color:#4a3929;
            font-weight: bold;
            display: flex;
            flex-direction: column;
        }
        .box div{
            flex-grow: 1;
            display: flex;
        }
        .box>div>div{
            
            margin: 5px;
            background-color:blanchedalmond;
            border-radius: 4%;
            display: flex;
            justify-content: center;
            align-items: center;

        }
        .number{
            
            background: transparent;
            
            background-color:transparent;
            border-radius: 4%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.5s;
        }
        @keyframes big {
            0%{
                transform: scale(1);
            }
            50%{
                transform: scale(1.2);
            }
            100%{
                transform: scale(1);
            }
        }
    </style>
</hEAD>
<body>
    <div class="wrapper">
        <div class="head">
            <div class="game-name"> 
                <h1>2048</h1> 
            </div> 
            <div class="score-board">
                <div class="score-title">SCORE</div>
                <div id="score">0</div>
            </div>
            
        </div>
        <div class="box">
            <div>
                <div id="11">
                    <div class="number"></div>
                </div>
                <div id="12">
                    <div class="number"></div>
                </div>
                <div id="13">
                    <div class="number"></div>
                </div>
                <div id="14">
                    <div class="number"></div>
                </div>
            </div>
            <div>
                <div id="21">
                    <div class="number"></div>
                </div>
                <div id="22">
                    <div class="number"></div>
                </div>
                <div id="23">
                    <div class="number"></div>
                </div>
                <div id="24">
                    <div class="number"></div>
                </div>
            </div>
            <div>
                <div id="31">
                    <div class="number"></div>
                </div>
                <div id="32">
                    <div class="number"></div>
                </div>
                <div id="33">
                    <div class="number"></div>
                </div>
                <div id="34">
                    <div class="number"></div>
                </div>
            </div>
            <div>
                <div id="41">
                    <div class="number"></div>
                </div>
                <div id="42">
                    <div class="number"></div>
                </div>
                <div id="43">
                    <div class="number"></div>
                </div>
                <div id="44">
                    <div class="number"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="B7.js"></script>
    <script>
        const colors = ['2','4','8','16','32','64','128','256','512','1024','2048']
        const colors_arr=["#eee3d6","#fab387","#f2b179","#f59563","#f67e5f","#f65e3b","#f1d96b","#f2cf4d","#e5c12b","#dfba12","#edc501"]
        var number_div=document.getElementsByClassName('number')
        var len_number=number_div.length
        var width_box=(document.getElementsByClassName('box')[0].getBoundingClientRect().width-50)/4
        var height_box=(document.getElementsByClassName('box')[0].getBoundingClientRect().height-50)/4
        for(var i=0;i<len_number;i++){
            number_div[i].style.width=width_box+'px'
            number_div[i].style.height=height_box+'px'
        }
        random()

        function random(){
            var Arr_empty=[]
            for(var i=1;i<5;i++){
                for(var j=1;j<5;j++){
                    var no=i*10+j
                    var str=no.toString()
                    var valu=document.getElementById(str).querySelector('.number').innerHTML
                    //console.log(valu=='.')
                    
                    if(valu==''){
                        Arr_empty.push(no)

                    }
                    else if(valu=='2048'){
                        alert("You Won")

                    }
                    
                    else{
                        continue
                        
                    }

                }
            }
            var len=Arr_empty.length
            if(len!=0){
                var random=Math.floor(Math.random()*len)
                var elem=Arr_empty[random]
               
                document.getElementById(elem.toString()).querySelector('.number').innerHTML='2'
                document.getElementById(elem.toString()).querySelector('.number').style.backgroundColor="#eee3d6";
                
                // var new_div=document.createElement('div')
                // new_div.setAttribute('class','number')
                // new_div.innerHTML='2'
                // div.appendChild(new_div)
            }
            
            //console.log(Arr_empty)
        }
        document.onkeydown = function(event) {
            
            
            clock_row=0
            switch (event.keyCode) {
            case 37:
                    array_box()
                    left_move()
                    setTimeout(is_array_same,100)
                    
                break;
            case 38:
                    array_box()
                    up_move()
                    setTimeout(is_array_same,100)
                break;
            case 39:
                    array_box()
                   right_move() 
                   setTimeout(is_array_same,100)
                break;
            case 40:
                    array_box()
                    down_move()
                    setTimeout(is_array_same,100)
                break;
            }
        };
        function color(){
            var num_len=document.getElementsByClassName("number")
            var length=num_len.length
            

            for(var i=0;i<length;i++){
                document.getElementsByClassName('number')[i].style.backgroundColor=''
                var elem_num=document.getElementsByClassName('number')[i]
                var len_arr=colors.length
                
                for(var j=0;j<len_arr;j++){
                    if(elem_num.innerText==colors[j]){
                        document.getElementsByClassName('number')[i].style.backgroundColor=''
                        document.getElementsByClassName('number')[i].style.backgroundColor=colors_arr[j]
                        
                        //console.log(j)
                    }
                }

                
            }
        }
        let old_arr_box=[]
        function array_box(){
            old_arr_box=[]
            for(var i=1;i<5;i++){
                var row=[]
                for(var j=1;j<5;j++){
                   var no=i*10+j
                   row.push(document.getElementById(no.toString()).querySelector('.number').innerHTML) 
                }
                old_arr_box.push(row)
            }
            console.log('byejo')
        }
        function is_array_same(){
            var new_arr_box=[]
            console.log('mk')
            for(var i=1;i<5;i++){
                var row=[]
                for(var j=1;j<5;j++){
                   var no=i*10+j
                   row.push(document.getElementById(no.toString()).querySelector('.number').innerHTML) 
                }
                new_arr_box.push(row)
            }
            for(var i=1;i<5;i++){
                for(var j=1;j<5;j++){
                    if(old_arr_box[i][j]==new_arr_box[i][j]){
                       
                        alert('No moves Left in this direction')
                    }
                }
            }
        }
        function clock(){
            // for(var i=1;i<5;i++){
            //     for(var j=i+1;j<5;j++){
            //         var prev=j*10+i
            //         var ne=i*10+j
            //         var str_p=prev.toString()
            //         var str_n=ne.toString()
            //         var temp=document.getElementById(str_p).innerHTML
            //         document.getElementById(str_p).innerHTML=document.getElementById(str_n).innerHTML
            //         document.getElementById(str_n).innerHTML=temp
            //     }
            // }
            var Arr_box=[]
            
            for(var i=1;i<5;i++){
                var row=[]
                for(var j=1;j<5;j++){
                   var no=i*10+j
                   row.push(document.getElementById(no.toString()).querySelector('.number').innerHTML) 
                }
                Arr_box.push(row)
            }
            for(var i=0;i<4;i++){
                for(var j=0;j<4;j++){
                    var temp=Arr_box[3-j][i]
                    var no=(i+1)*10+(j+1)
                    document.getElementById(no.toString()).querySelector('.number').innerHTML=temp
                }
            }
            clock_row++
            color()
            
        }
        
        let count=0
        let start=0
        let rows_merged=[]
        let clock_row=0
        function left(){
            rows_merged=[]
            
            for(var i=1;i<5;i++){
                count=0;
                start=0
                var row=[]
                var each_row={}
                for(var j=1;j<5;j++){
                    var no=i*10+j
                    var val=document.getElementById(no.toString()).querySelector('.number').innerHTML
                    if(val!=''){
                        var num=parseInt(val)
                        var len=row.length
                        if(len!=0){
                            if(row[len-1]==num){
                                var ne=row[len-1]+num
                                row.pop()
                                row.push(ne)
                                var score=parseInt(document.getElementById('score').innerHTML)
                                score+=ne
                                document.getElementById('score').innerHTML=score.toString()
                                start=len-1
                                count++
                                if(j!=4&&j!=1){
                                    var strange=i*10+(j+1)
                                    var val_s=document.getElementById(strange.toString()).querySelector('.number').innerHTML
                                    
                                    if(val_s==ne.toString()){
                                        count--
                                       // console.log('I am here')
                                    }
                                }
                                
                            }
                            else{
                                row.push(num)
                            }
                        }
                        else{
                            row.push(num)
                        }
                        
                    }
                }
                each_row.start=start;
                each_row.count=count;
                each_row.row=i
                rows_merged.push(each_row)
                var len_row=row.length
                if(len_row!=0){
                    for(var j=0;j<len_row;j++){
                        var no=i*10+(j+1)
                        document.getElementById(no.toString()).querySelector('.number').innerHTML=row[j].toString()
                        var index=colors.indexOf(row[j].toString())
                        //console.log(index)
                        document.getElementById(no.toString()).querySelector('.number').style.backgroundColor=colors_arr[index]
                        document.getElementById(no.toString()).querySelector('.number').style.animation=''
                        document.getElementById(no.toString()).querySelector('.number').style.transform=''
                        
                        
                        
                    }
                    for(var j=len_row+1;j<5;j++){
                        var no=i*10+j
                        document.getElementById(no.toString()).querySelector('.number').innerHTML=''
                        document.getElementById(no.toString()).querySelector('.number').style.backgroundColor=''
                        document.getElementById(no.toString()).querySelector('.number').style.animation=''
                        document.getElementById(no.toString()).querySelector('.number').style.transform=''
                    }
                }
                else{
                    for(var j=1;j<5;j++){
                        var no=i*10+j
                        document.getElementById(no.toString()).querySelector('.number').innerHTML=''
                        document.getElementById(no.toString()).querySelector('.number').style.backgroundColor=''
                        document.getElementById(no.toString()).querySelector('.number').style.animation=''
                        document.getElementById(no.toString()).querySelector('.number').style.transform=''
                    }
                }
                // if(start!=0){
                //     for(var k=start;k<=count;k++){
                //         var no=i*10+(start+1)
                //         document.getElementById(no.toString()).querySelector('.number').style.animation='0.2s big'
                //     }
                // }
                // else{
                //     for(var k=0;k<count;k++){
                //         var no=i*10+(k+1)
                //         document.getElementById(no.toString()).querySelector('.number').style.animation='0.2s big'
                //     }
                // }
                
                
            }
            random()
           
        }
        function up(){
            clock()
            clock()
            clock()
            left()
            merger()
            clock()
        }
        function down(){
            clock()
            left()
            merger()
            clock()
            clock()
            clock()
        }
        function right(){
            clock()
            clock()
            left()
            merger()
            clock()
            clock()
        }
        function merger(){
            //console.log(clock_row)
            //console.log(rows_merged)
            
            switch(clock_row){
                case 0:
                    for(i=1;i<5;i++){
                        no=i*10+1
                        array_elem=i-1
                        var element=rows_merged[array_elem]
                        //console.log(element)

                        var length_arr=rows_merged.length
                        if(length_arr>0){
                        for(var k=element.start;k<element.count+element.start;k++){
                            var new_no=no+k
                            document.getElementById(new_no.toString()).querySelector('.number').style.animation='0.2s big'
                        }
                        }
                    }
                    break;
                ;
                case 1:
                    for(i=1;i<5;i++){    
                        no=40+i
                        array_elem=i-1
                        var element=rows_merged[array_elem]
                        //console.log(element)
                        var length_arr=rows_merged.length
                        if(length_arr>0){
                        for(var k=element.start;k<element.count+element.start;k++){
                            var new_no=no-(k*10)
                            document.getElementById(new_no.toString()).querySelector('.number').style.animation='0.2s big'
                        }
                        }
                    }
                    break;
                ;
                case 2:
                    for(i=1;i<5;i++){    
                        no=i*10+4
                        array_elem=4-i
                        var element=rows_merged[array_elem]
                        //console.log(element)
                        var length_arr=rows_merged.length
                        if(length_arr>0){
                        for(var k=element.start;k<element.count+element.start;k++){
                            var new_no=no-k
                            document.getElementById(new_no.toString()).querySelector('.number').style.animation='0.2s big'
                        }
                        }
                    }
                    break;
                ;
                case 3:
                    for(i=1;i<5;i++){   
                        no=10+i
                        
                        array_elem=4-i
                        var element=rows_merged[array_elem]
                        //console.log(element)
                        var length_arr=rows_merged.length
                        if(length_arr>0){
                        for(var k=element.start;k<element.count+element.start;k++){
                            var new_no=no+(k*10)
                            document.getElementById(new_no.toString()).querySelector('.number').style.animation='0.2s big'
                        }
                        }
                    }
                    break;    
                ;
            }
            //console.log('hi')


        }



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////






        function left_move(){
            var dist=document.getElementById('11').getBoundingClientRect().width+10
            console.log('left')
            for(var i=1;i<5;i++){
                let spaces=0
                let merge_dist=0
                let row=[]
                let merged=false
                let second_merged=false
                var double_merged=false
                let count=2
                let first=i*10+1
                if(get_el(first)==''){
                    spaces=1
                }
                for(var j=2;j<5;j++){
                    var no=i*10+j
                    
                   
                    if(get_el(no)!=''){
                        var isSecond=j-spaces
                        let total_dist=0
                        
                        if(count==2){
                            if(get_el(no)==get_el(first)){
                                merged=true
                                merge_dist++
                            }
                            row.push(get_el(no))
                            total_dist=merge_dist+spaces
                            count++
                            //console.log(i+" "+j+" "+total_dist)
                            //console.log(i+'     '+row)
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=-(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                           // console.log(final)
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateX("+final+"px)"
                           // console.log(document.getElementById(no.toString()).querySelector('.number'))
                            spaces=0
                            continue
                        }
                        
                        var isThird=row.length==1
                        if(count==3){
                            if(merged==false){
                                total_dist=spaces
                                if(row[0]==get_el(no)){
                                    total_dist++
                                    second_merged=true
                                }
                                row.push(get_el(no))
                            }
                            else{
                                total_dist=spaces+1
                                if(parseInt(get_el(no))==parseInt(get_el(first))+parseInt(row[0])){
                                    total_dist++
                                    double_merged=true
                                }
                                row.push(get_el(no))
                            }
                            count++
                            //console.log(i+" "+j+" "+total_dist)
                            //console.log(i+'     '+row)
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=-(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateX("+final+"px)"
                            //console.log(document.getElementById(no.toString()).querySelector('.number'))
                            spaces=0
                            continue
                        }
                        var isFourth=row.length==2
                        if(count==4){
                            if(merged){
                                total_dist++
                                if(double_merged){
                                    total_dist++

                                }

                            }
                            else if(second_merged){
                                total_dist++
                                if(parseInt(get_el(no))==parseInt(row[1])+parseInt(row[0])){
                                    total_dist++
                                }
                            }
                            else{
                                if(get_el(no)==row[1]){
                                    total_dist++
                                }
                            }
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=-(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateX("+final+"px)"
                            //console.log(document.getElementById(no.toString()).querySelector('.number'))
                        }
                        //console.log(i+" "+j+" "+total_dist)
                        //console.log(i+'     '+row)
                        spaces=0
                    }
                    else{
                        spaces++
                    }
                    
                }
            }
            //console.log('hi')
            setTimeout(newfunction,100)
            
        }

        function newfunction(){
            left()
            merger()
        }



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////





        function right_move(){
            var dist=document.getElementById('11').getBoundingClientRect().width+10
            
            for(var i=1;i<5;i++){
                let spaces=0
                let merge_dist=0
                let row=[]
                let merged=false
                let second_merged=false
                var double_merged=false
                let count=2
                let first=i*10+4
                if(get_el(first)==''){
                    spaces=1
                }
                for(var j=2;j<5;j++){
                    var no=i*10+(5-j)
                    
                   
                    if(get_el(no)!=''){
                        var isSecond=j-spaces
                        let total_dist=0
                        
                        if(count==2){
                            if(get_el(no)==get_el(first)){
                                merged=true
                                merge_dist++
                            }
                            row.push(get_el(no))
                            total_dist=merge_dist+spaces
                            count++
                            //console.log(i+" "+j+" "+total_dist)
                            //console.log(i+'     '+row)
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                           // console.log(final)
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateX("+final+"px)"
                           // console.log(document.getElementById(no.toString()).querySelector('.number'))
                            spaces=0
                            continue
                        }
                        
                        var isThird=row.length==1
                        if(count==3){
                            if(merged==false){
                                total_dist=spaces
                                if(row[0]==get_el(no)){
                                    total_dist++
                                    second_merged=true
                                }
                                row.push(get_el(no))
                            }
                            else{
                                total_dist=spaces+1
                                if(parseInt(get_el(no))==parseInt(get_el(first))+parseInt(row[0])){
                                    total_dist++
                                    double_merged=true
                                }
                                row.push(get_el(no))
                            }
                            count++
                            //console.log(i+" "+j+" "+total_dist)
                            //console.log(i+'     '+row)
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateX("+final+"px)"
                           // console.log(document.getElementById(no.toString()).querySelector('.number'))
                            spaces=0
                            continue
                        }
                        var isFourth=row.length==2
                        if(count==4){
                            if(merged){
                                total_dist++
                                if(double_merged){
                                    total_dist++

                                }

                            }
                            else if(second_merged){
                                total_dist++
                                if(parseInt(get_el(no))==parseInt(row[1])+parseInt(row[0])){
                                    total_dist++
                                }
                            }
                            else{
                                if(get_el(no)==row[1]){
                                    total_dist++
                                }
                            }
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateX("+final+"px)"
                           // console.log(document.getElementById(no.toString()).querySelector('.number'))
                        }
                        //console.log(i+" "+j+" "+total_dist)
                        //console.log(i+'     '+row)
                        spaces=0
                    }
                    else{
                        spaces++
                    }
                    
                }
            }
            //console.log('hi')
            setTimeout(right,100)
        }



///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



function up_move(){
            var dist=document.getElementById('11').getBoundingClientRect().height+10
            
            for(var i=1;i<5;i++){
                let spaces=0
                let merge_dist=0
                let row=[]
                let merged=false
                let second_merged=false
                var double_merged=false
                let count=2
                let first=10+i
                if(get_el(first)==''){
                    spaces=1
                }
                for(var j=2;j<5;j++){
                    var no=j*10+i
                    
                   
                    if(get_el(no)!=''){
                        var isSecond=j-spaces
                        let total_dist=0
                        
                        if(count==2){
                            if(get_el(no)==get_el(first)){
                                merged=true
                                merge_dist++
                            }
                            row.push(get_el(no))
                            total_dist=merge_dist+spaces
                            count++
                            //console.log(i+" "+j+" "+total_dist)
                            //console.log(i+'     '+row)
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=-(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                           // console.log(final)
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateY("+final+"px)"
                           // console.log(document.getElementById(no.toString()).querySelector('.number'))
                            spaces=0
                            continue
                        }
                        
                        var isThird=row.length==1
                        if(count==3){
                            if(merged==false){
                                total_dist=spaces
                                if(row[0]==get_el(no)){
                                    total_dist++
                                    second_merged=true
                                }
                                row.push(get_el(no))
                            }
                            else{
                                total_dist=spaces+1
                                if(parseInt(get_el(no))==parseInt(get_el(first))+parseInt(row[0])){
                                    total_dist++
                                    double_merged=true
                                }
                                row.push(get_el(no))
                            }
                            count++
                            //console.log(i+" "+j+" "+total_dist)
                            //console.log(i+'     '+row)
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=-(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateY("+final+"px)"
                           // console.log(document.getElementById(no.toString()).querySelector('.number'))
                            spaces=0
                            continue
                        }
                        var isFourth=row.length==2
                        if(count==4){
                            if(merged){
                                total_dist++
                                if(double_merged){
                                    total_dist++

                                }

                            }
                            else if(second_merged){
                                total_dist++
                                if(parseInt(get_el(no))==parseInt(row[1])+parseInt(row[0])){
                                    total_dist++
                                }
                            }
                            else{
                                if(get_el(no)==row[1]){
                                    total_dist++
                                }
                            }
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=-(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateY("+final+"px)"
                           // console.log(document.getElementById(no.toString()).querySelector('.number'))
                        }
                        //console.log(i+" "+j+" "+total_dist)
                        //console.log(i+'     '+row)
                        spaces=0
                    }
                    else{
                        spaces++
                    }
                    
                }
            }
            //console.log('hi')
            setTimeout(up,100)
        }






        /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////









        function down_move(){
            var dist=document.getElementById('11').getBoundingClientRect().height+10
            
            for(var i=1;i<5;i++){
                let spaces=0
                let merge_dist=0
                let row=[]
                let merged=false
                let second_merged=false
                var double_merged=false
                let count=2
                let first=40+i
                if(get_el(first)==''){
                    spaces=1
                }
                for(var j=2;j<5;j++){
                    var no=(5-j)*10+i
                    
                   
                    if(get_el(no)!=''){
                        var isSecond=j-spaces
                        let total_dist=0
                        
                        if(count==2){
                            if(get_el(no)==get_el(first)){
                                merged=true
                                merge_dist++
                            }
                            row.push(get_el(no))
                            total_dist=merge_dist+spaces
                            count++
                            //console.log(i+" "+j+" "+total_dist)
                            //console.log(i+'     '+row)
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                           // console.log(final)
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateY("+final+"px)"
                           // console.log(document.getElementById(no.toString()).querySelector('.number'))
                            spaces=0
                            continue
                        }
                        
                        var isThird=row.length==1
                        if(count==3){
                            if(merged==false){
                                total_dist=spaces
                                if(row[0]==get_el(no)){
                                    total_dist++
                                    second_merged=true
                                }
                                row.push(get_el(no))
                            }
                            else{
                                total_dist=spaces+1
                                if(parseInt(get_el(no))==parseInt(get_el(first))+parseInt(row[0])){
                                    total_dist++
                                    double_merged=true
                                }
                                row.push(get_el(no))
                            }
                            count++
                            //console.log(i+" "+j+" "+total_dist)
                            //console.log(i+'     '+row)
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateY("+final+"px)"
                           // console.log(document.getElementById(no.toString()).querySelector('.number'))
                            spaces=0
                            continue
                        }
                        var isFourth=row.length==2
                        if(count==4){
                            if(merged){
                                total_dist++
                                if(double_merged){
                                    total_dist++

                                }

                            }
                            else if(second_merged){
                                total_dist++
                                if(parseInt(get_el(no))==parseInt(row[1])+parseInt(row[0])){
                                    total_dist++
                                }
                            }
                            else{
                                if(get_el(no)==row[1]){
                                    total_dist++
                                }
                            }
                            let final=(dist*total_dist)
                            if(final!=0){
                                final=(dist*total_dist)
                            }
                            else{
                                final=0
                            }
                            document.getElementById(no.toString()).querySelector('.number').style.transform="translateY("+final+"px)"
                           // console.log(document.getElementById(no.toString()).querySelector('.number'))
                        }
                        //console.log(i+" "+j+" "+total_dist)
                        //console.log(i+'     '+row)
                        spaces=0
                    }
                    else{
                        spaces++
                    }
                    
                }
            }
            //console.log('hi')
            setTimeout(down,100)
        }

        function get_el(input){
            return document.getElementById(input.toString()).querySelector('.number').innerHTML
        }
    </script>
</body>